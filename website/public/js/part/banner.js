/*头部js样式*/
(function(){
    let wrap=document.getElementById("wrap"),//获取大盒子
        pic=document.getElementsByClassName("pict")[0],//获取装图片的ul
        btn=document.querySelectorAll(".tab li + li"),//获取小球
        on=document.getElementsByClassName("on")[0],//回去运动的小球
        prev=document.getElementsByClassName("prev")[0],//获取左箭头
        next=document.getElementsByClassName("next")[0],//获取右箭头
        num=0,//定义图片序号
        wit=1200,//定义图片宽度
        len=btn.length;//定义小球的数量5
    //定义图片轮播函数
    function run(){
        num++;//序号自增
        //小球切换
        if(num===len){//如果num++后等于len-1，即从最后一张切换到第一张
            //让当前小球先在当前位置消失
            animation(on,{
                data:{
                    opacity:0
                }
            },250,()=>{
                on.style.left=10+"px";//然后改变小球的位置
                //最后让它在第一个位置显示
                animation(on,{
                    data:{
                        opacity:1
                    }
                },250);
            });
            animation(pic,{
                data:{
                    left:-num*wit
                },
                speedOpt:{
                    ease:"Linear",
                    speed:2
                }
            },500,()=>{
                pic.style.left=0+"px";
            });
            num=0;
        }else{//其它情况（正常切换）
            animation(on,{
                data:{
                    left:num*30+10
                }
            },500);
            //图片切换
            animation(pic,{
                data:{
                    left:-num*wit
                },
                speedOpt:{
                    ease:"Linear",
                    speed:2
                }
            },500);
        }
    }
    let time=setInterval(run,3000);//定义定时器，循环播放
    wrap.onmouseover=function(){//鼠标移入清除定时器
        clearInterval(time);
    };
    wrap.onmouseout=function(){//鼠标移出恢复定时器
        time=setInterval(run,3000);
    };
    for(let i=0;i<len;i++){//给每个无色小球添加事件
        btn[i].onclick=function(){
            //小球变化
            if(Math.abs(i-num)>1){//如果被点击的小球与当前有色小球不相邻
                animation(on,{//有色小球先消失后出现
                    data:{
                        opacity:0
                    }
                },250,()=>{
                    on.style.left=i*30+10+"px";
                    animation(on,{
                        data:{
                            opacity:1
                        }
                    },250,);
                });
            }else{//如果相邻，就正常切换
                animation(on,{
                    data:{
                        left:i*30+10
                    }
                },500);
            }
            //将图片切换至对应小球的序号
            animation(pic,{
                data:{
                    left:-i*wit
                },
                speedOpt:{
                    ease:"Linear",
                    speed:2
                }
            },500);
            num=i;//修改当前图片的序号
        }
    }
    prev.onclick=function(){//左箭头点击事件
        num--;//图片序号-1
        if(num<0){//从第一张切换至最后一张的情况
            num=len-1;//获取最后一张图片的序号
            pic.style.left=-len*wit+"px";//先将ul拉回至最后一张
            animation(on,{//有色小球先消失后出现
                data:{
                    opacity:0
                }
            },250,()=>{
                on.style.left=num*30+10+"px";
                animation(on,{
                    data:{
                        opacity:1
                    }
                },250);
            });
        }else{//正常切换（其他情况）
            animation(on,{
                data:{
                    left:num*30+10
                }
            },500);
        }
        //图片切换
        animation(pic,{
            data:{
                left:-num*wit
            },
            speedOpt:{
                ease:"Linear",
                speed:2
            }
        },500);
    }
    next.onclick=function(){
        run();
    }
})();